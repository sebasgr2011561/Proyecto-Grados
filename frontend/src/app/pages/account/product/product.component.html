<!-- Header -->
<app-header></app-header>

<!-- Page Title -->
<div class="page-title-overlap bg-accent pt-4">
  <app-account-breadcrumbs></app-account-breadcrumbs>
</div>

<!-- contenet -->
<div class="container mb-5 pb-3">
  <div class="bg-light shadow-lg rounded-3 overflow-hidden">
    <div class="row">
      <!-- Sidebar -->
      <aside class="col-lg-4 pe-xl-5">
        <app-acount-sidemenu></app-acount-sidemenu>
      </aside>
      <!-- Content -->
      <section class="col-lg-8 pt-lg-4 pb-4 mb-3">
        <div class="pt-2 px-4 ps-lg-0 pe-xl-5">
          <!-- Title -->
          <div class="d-sm-flex flex-wrap justify-content-between align-items-center border-bottom">
            <h2 class="h3 py-2 me-2 text-center text-sm-start">
              Tus Recursos
              <!-- <span class="badge bg-faded-accent fs-sm text-body align-middle ms-2">{{products.length}}</span> -->
            </h2>
            <a class="btn btn-accent" routerLink="/addproduct" *ngIf="idRolEstudiante !== 3">
              Crear nuevo recurso
            </a>
          </div>
          <!-- Product -->
          <div *ngIf="idRolEstudiante !== 3; else estudiante">
            @for(data of products;track $index) {
              <div class="d-block d-sm-flex align-items-center py-4 border-bottom">
                <a class="d-block mb-3 mb-sm-0 me-sm-4 ms-sm-0 mx-auto" href="javascript:void(0)" routerLink="/single"
                  style="width: 12.5rem">
                  <img class="rounded-3" src="{{ data.imagenPortada }}" alt="{{ data.descripcion }}" />
                </a>
                <div class="text-center text-sm-start">
                  <h3 class="h6 product-title mb-2">
                    <a href="javascript:void(0)" routerLink="/single">
                      {{ data.nombreRecurso }}
                    </a>
                  </h3>

                  <div class="d-inline-block text-accent">
                    Duracion:
                    <span class="fw-medium">{{ data.duracion }}</span>
                    Horas
                  </div>

                  <div class="d-inline-block text-muted fs-ms border-start ms-2 ps-2 price">
                    Precio:
                    <span class="fw-medium">{{ data.precio | currency }}</span>
                  </div>
                  <div class="d-flex justify-content-center justify-content-sm-start pt-3">
                    <button class="btn bg-faded-info btn-icon me-2" type="button" data-bs-toggle="tooltip"
                      ngbTooltip="Editar" (click)="editproduct(data.idRecurso)">
                      <i class="ci-edit text-info"></i>
                    </button>
                    <button class="btn bg-faded-danger btn-icon" type="button" data-bs-toggle="tooltip"
                      ngbTooltip="Eliminar" (click)="removeproduct(data.idRecurso)">
                      <i class="ci-trash text-danger"></i>
                    </button>
                  </div>
                </div>
              </div>
            }
          </div>
          <ng-template #estudiante>
            @for(data of products;track $index) {
              <div class="d-block d-sm-flex align-items-center py-4 border-bottom">
                <a class="d-block mb-3 mb-sm-0 me-sm-4 ms-sm-0 mx-auto" href="javascript:void(0)" routerLink="/single"
                  style="width: 12.5rem">
                  <img class="rounded-3" src="{{ data.imagenPortada }}" alt="{{ data.descripcion }}" />
                </a>
                <div class="text-center text-sm-start">
                  <h3 class="h6 product-title mb-2">
                    <a href="javascript:void(0)" routerLink="/single">
                      {{ data.nombreRecurso }}
                    </a>
                  </h3>

                  <div class="d-inline-block text-accent">
                    Duracion:
                    <span class="fw-medium">{{ data.duracion }}</span>
                    Horas
                  </div>
                  <div class="d-flex justify-content-center justify-content-sm-start pt-3">
                    <button class="btn bg-faded-info btn-icon me-2" type="button" 
                      ngbTooltip="Calificar" data-bs-toggle="modal" data-bs-target="#showModal" (click)="openModal(data.idRecurso)">
                      <i class="ci-star text-info"></i>
                    </button>
                    <button class="btn bg-faded-info btn-icon me-2" type="button" 
                      ngbTooltip="Asociar a ruta" data-bs-toggle="modal" data-bs-target="#showModal" (click)="openModalAsociar(data.idRecurso)">
                      <i class="ci-edit text-info"></i>
                    </button>
                  </div>
                  
                </div>
              </div>
            }
          </ng-template>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- Footer -->
<app-footer></app-footer>