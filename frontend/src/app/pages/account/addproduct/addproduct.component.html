<!-- Header -->
<app-header></app-header>

<!-- Page Title -->
<div class="page-title-overlap bg-accent pt-4">
  <app-account-breadcrumbs></app-account-breadcrumbs>
</div>

<!-- Content -->
<div class="container mb-5 pb-3">
  <div class="bg-light shadow-lg rounded-3 overflow-hidden">
    <div class="row">
      <!-- Sidebar -->
      <aside class="col-lg-3 pe-xl-5">
        <app-acount-sidemenu></app-acount-sidemenu>
      </aside>
      <!-- Content -->
      <section class="col-lg-8 pt-lg-4 pb-4 mb-3">
        <div class="pt-2 px-4 ps-lg-0 pe-xl-5">
          <!-- Title -->
          <div class="d-sm-flex flex-wrap justify-content-between align-items-center pb-2">
            <h2 class="h3 py-2 me-2 text-center text-sm-start">Agregar un Nuevo Recurso</h2>
            <!-- Categoria -->
          </div>
          <!-- formulario creacion recurso -->
          <form method="post" (ngSubmit)="AddProduct()" [formGroup]="productForm">

            <div class="mb-3 pb-2">
              <label class="form-label" for="unp-product-name">
                Nombre del Recurso
              </label>
              <input class="form-control" type="text" id="unp-product-name" formControlName="name">
              <div class="form-text">
                Maximo 100 caracteres. No permitido HTML o Emojis.
              </div>
            </div>

            <div class="mb-md-5 mb-4 pb-md-0 pb-2">
              <h2 class="h5 mb-2 pb-1">Imagen de Portada Recurso</h2>
              <!-- Drag and drop file upload-->
              <ngx-dropzone class="file-drop-area" (change)="onSelect($event)">
                  <ngx-dropzone-label>
                      <div class="file-drop-icon ci-cloud-upload"></div>
                      <span class="file-drop-message">Arrastra y suelta aquí para subir la imagen de portada para el recurso</span>
                  </ngx-dropzone-label>
                  @for(f of files;track $index){
                  <ngx-dropzone-preview [removable]="true" (removed)="onRemove(f)">
                      <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                  </ngx-dropzone-preview>
                  }
                  <!-- <button class="file-drop-btn btn btn-outline-accent" type="button">Or select file</button> -->
              </ngx-dropzone>
              <p class="mb-4 fs-sm">Tipos de formatos permitidos: PNG, JPG, GIF, WEBP, MP3 or MP4. Tamaño max: 100mb.</p>
            </div>

            <div class="mb-3 py-2">
              <label class="form-label" for="unp-product-description">
                Descripcion del recurso
              </label>
              <textarea class="form-control" rows="3" id="unp-product-description" formControlName="description"></textarea>
            </div>

            <div class="mb-md-5 mb-4 pb-md-0 pb-2">
              <div class="row gy-md-4 gy-3">
                  <div class="col-sm-6">
                    <label class="form-label" for="profile-name">
                      Categoría
                    </label>
                    <select id="profile-rol" class="form-control" formControlName="rol">
                      <option *ngFor="let item of categorias" [value]="item.idCategoria" >{{ item.nombreCategoria }}</option>
                    </select>
                  </div>
              </div>
            </div>

            <div class="tab-pane fade mb-4 pb-2 show" id="price-fix" role="tabpanel">
              <!-- Properties-->
              <h3 class="h5 mb-4">Lecciones y modulos <span class='fw-normal text-muted'></span>
              </h3>
              @for(size of getItemFormControls();track $index){
              <div class="row gy-md-4 gy-3 mb-3">
                  <div class="col-sm-5">
                      <input class="form-control" type="text" placeholder="Modulo 1" formControlName="sizes">
                  </div>
                  <div class="col-sm-5">
                      <input class="form-control" type="text" placeholder="Link Referencia" formControlName="sizes">
                  </div>
                  <div class="col-sm-2 d-flex align-items-center">
                      <a href="javascripts:void(0);" (click)="removeItem($index)"><i class="ci-trash me-2"></i><ins>Delete</ins></a>
                  </div>
              </div>
              }
              <a href="javascripts:void(0);" (click)="addItem()"><i class="ci-add me-2"></i><ins>Add
                      more</ins></a>

          </div>

            <div class="mb-3 pb-2">
              <label class="form-label" for="unp-product-files">
                Documentos adicionales para el recurso (PDFS, IMG)
              </label>
              <input class="form-control" id="unp-product-files" type="file" accept="image/png, image/gif, image/jpeg" formControlName="salefile" (change)="fileChange($event)">
              <div class="form-text">Maximo tamaño permitido 1GB</div>
            </div>
            <button class="btn btn-primary d-block w-100" type="submit">
              <i class="ci-cloud-upload fs-lg me-2"></i>
              Subir documento
            </button>
          </form>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- Footer -->
<app-footer></app-footer>
